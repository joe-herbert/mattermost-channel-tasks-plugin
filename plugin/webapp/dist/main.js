(()=>{"use strict";var e={609:e=>{e.exports=window.React},900:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((o=o.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&l[0]?o.return:l[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,l[1])).done)return r;switch(o=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,a=t.length;r<a;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=d(n(609)),u=function(){function e(){this.store=null,this.toggleRHSPlugin=null}return e.prototype.initialize=function(e,t){this.store=t;var n=e.registerRightHandSidebarComponent(p,"Channel Todos").toggleRHSPlugin;this.toggleRHSPlugin=n,e.registerChannelHeaderButtonAction(function(){return c.default.createElement("i",{className:"icon icon-check",style:{fontSize:"18px"}})},function(){t.dispatch(n)},"Todo List","Open todo list for this channel"),e.registerChannelHeaderMenuAction("Todo List",function(){t.dispatch(n)},function(){return c.default.createElement("i",{className:"icon icon-check"})})},e.prototype.uninitialize=function(){},e}();t.default=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.channelCheckInterval=null,t.state={todos:[],groups:[],newTodoText:"",newGroupName:"",selectedGroup:"",channelMembers:[],showGroupForm:!1,showTodoForm:!1,draggedTodo:null,filterMyTasks:!1,currentUserId:"",_lastChannelId:""},t.loadCurrentUser=function(){return i(t,void 0,void 0,function(){var e,t;return l(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("/api/v4/users/me")];case 1:return[4,n.sent().json()];case 2:return e=n.sent(),this.setState({currentUserId:e.id}),[3,4];case 3:return t=n.sent(),console.error("Error loading current user:",t),[3,4];case 4:return[2]}})})},t.loadTodos=function(){return i(t,void 0,void 0,function(){var e,t,n;return l(this,function(o){switch(o.label){case 0:if(e=this.getChannelId(),console.log("Loading todos for channel:",e),!e)return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(e))];case 2:return[4,o.sent().json()];case 3:return t=o.sent(),this.setState({todos:t.items,groups:t.groups}),[3,5];case 4:return n=o.sent(),console.error("Error loading todos:",n),[3,5];case 5:return[2]}})})},t.loadChannelMembers=function(){return i(t,void 0,void 0,function(){var e,t,n,o,r;return l(this,function(a){switch(a.label){case 0:if(!(e=this.getChannelId()))return[2];a.label=1;case 1:return a.trys.push([1,5,,6]),[4,fetch("/api/v4/channels/".concat(e,"/members"))];case 2:return[4,a.sent().json()];case 3:return t=a.sent(),n=t.map(function(e){return fetch("/api/v4/users/".concat(e.user_id)).then(function(e){return e.json()})}),[4,Promise.all(n)];case 4:return o=a.sent(),this.setState({channelMembers:o}),[3,6];case 5:return r=a.sent(),console.error("Error loading channel members:",r),[3,6];case 6:return[2]}})})},t.addTodo=function(){return i(t,void 0,void 0,function(){var e,t,n,o,r,a,i,s,d;return l(this,function(l){switch(l.label){case 0:if(e=this.state,t=e.newTodoText,n=e.selectedGroup,o=this.getChannelId(),console.log("Adding todo:",t,"for channel:",o),!t.trim()||!o)return[2];l.label=1;case 1:return l.trys.push([1,6,,7]),console.log("Sending POST request to add todo"),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(o),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,completed:!1,group_id:n||void 0})})];case 2:return r=l.sent(),console.log("Add todo response:",r.status,r.ok),r.ok?(this.setState({newTodoText:""}),this.loadTodos(),[3,5]):[3,3];case 3:return i=(a=console).error,s=["Failed to add todo:"],[4,r.text()];case 4:i.apply(a,s.concat([l.sent()])),l.label=5;case 5:return[3,7];case 6:return d=l.sent(),console.error("Error adding todo:",d),[3,7];case 7:return[2]}})})},t.toggleTodo=function(e){return i(t,void 0,void 0,function(){var t,n;return l(this,function(o){switch(o.label){case 0:if(!(t=this.getChannelId()))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(a({},e),{completed:!e.completed}))})];case 2:return o.sent(),this.loadTodos(),[3,4];case 3:return n=o.sent(),console.error("Error toggling todo:",n),[3,4];case 4:return[2]}})})},t.deleteTodo=function(e){return i(t,void 0,void 0,function(){var t,n;return l(this,function(o){switch(o.label){case 0:if(!(t=this.getChannelId()))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(t,"&id=").concat(e),{method:"DELETE"})];case 2:return o.sent(),this.loadTodos(),[3,4];case 3:return n=o.sent(),console.error("Error deleting todo:",n),[3,4];case 4:return[2]}})})},t.toggleAssignee=function(e,n){return i(t,void 0,void 0,function(){var t,o,r,i;return l(this,function(l){switch(l.label){case 0:if(!(t=this.getChannelId()))return[2];o=e.assignee_ids||[],r=o.includes(n)?o.filter(function(e){return e!==n}):s(s([],o,!0),[n],!1),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(a({},e),{assignee_ids:r}))})];case 2:return l.sent(),this.loadTodos(),[3,4];case 3:return i=l.sent(),console.error("Error toggling assignee:",i),[3,4];case 4:return[2]}})})},t.addGroup=function(){return i(t,void 0,void 0,function(){var e,t,n,o,r,a,i;return l(this,function(l){switch(l.label){case 0:if(e=this.state.newGroupName,t=this.getChannelId(),console.log("Adding group:",e,"for channel:",t),!e.trim()||!t)return[2];l.label=1;case 1:return l.trys.push([1,6,,7]),console.log("Sending POST request to add group"),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/groups?channel_id=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})];case 2:return n=l.sent(),console.log("Add group response:",n.status,n.ok),n.ok?(this.setState({newGroupName:""}),this.loadTodos(),[3,5]):[3,3];case 3:return r=(o=console).error,a=["Failed to add group:"],[4,n.text()];case 4:r.apply(o,a.concat([l.sent()])),l.label=5;case 5:return[3,7];case 6:return i=l.sent(),console.error("Error adding group:",i),[3,7];case 7:return[2]}})})},t.deleteGroup=function(e){return i(t,void 0,void 0,function(){var t,n;return l(this,function(o){switch(o.label){case 0:if(!(t=this.getChannelId()))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/groups?channel_id=".concat(t,"&id=").concat(e),{method:"DELETE"})];case 2:return o.sent(),this.loadTodos(),[3,4];case 3:return n=o.sent(),console.error("Error deleting group:",n),[3,4];case 4:return[2]}})})},t.handleDragStart=function(e){console.log("Parent: handleDragStart called for todo:",e.text),setTimeout(function(){t.setState({draggedTodo:e})},0)},t.handleDragEnd=function(){console.log("handleDragEnd - clearing dragged todo"),t.setState({draggedTodo:null})},t.handleDrop=function(e){return i(t,void 0,void 0,function(){var t,n,o,r,i;return l(this,function(l){switch(l.label){case 0:if(t=this.state.draggedTodo,n=this.getChannelId(),console.log("handleDrop called:",{draggedTodo:t,targetGroupId:e,channelId:n}),!t||!n)return console.log("No dragged todo or channel ID"),[2];if((o=t.group_id||null)===e)return console.log("Same group, no update needed"),this.setState({draggedTodo:null}),[2];console.log("Updating todo group from",o,"to",e),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch("/plugins/com.mattermost.channel-todo/api/v1/todos?channel_id=".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(a({},t),{group_id:e||void 0}))})];case 2:return(r=l.sent()).ok?(console.log("Todo updated successfully"),this.setState({draggedTodo:null}),this.loadTodos()):console.error("Failed to update todo:",r.status),[3,4];case 3:return i=l.sent(),console.error("Error moving todo:",i),this.setState({draggedTodo:null}),[3,4];case 4:return[2]}})})},t.groupedTodos=function(e){var n=t.state,o=n.filterMyTasks,r=n.currentUserId,a=t.state.todos.filter(function(t){return null===e?!t.group_id:t.group_id===e});return o&&r&&(a=a.filter(function(e){return(e.assignee_ids||[]).includes(r)})),a},t}return r(t,e),t.prototype.componentDidMount=function(){var e=this;console.log("TodoSidebar mounted with props:",this.props),this.loadCurrentUser(),this.loadTodos(),this.loadChannelMembers(),this.channelCheckInterval=setInterval(function(){var t=e.getChannelId();t&&t!==e.state._lastChannelId&&(console.log("Channel changed from",e.state._lastChannelId,"to",t),e.setState({_lastChannelId:t}),e.loadTodos(),e.loadChannelMembers())},500)},t.prototype.componentWillUnmount=function(){this.channelCheckInterval&&clearInterval(this.channelCheckInterval)},t.prototype.componentDidUpdate=function(e){var t=this.getChannelId(e),n=this.getChannelId(this.props);t&&n&&t!==n&&(console.log("Channel changed via props from",t,"to",n),this.setState({_lastChannelId:n}),this.loadTodos(),this.loadChannelMembers())},t.prototype.getChannelId=function(e){var t,n,o,r,a;return void 0===e&&(e=this.props),e.channelId||(null===(t=e.channel)||void 0===t?void 0:t.id)||(null===(a=null===(r=null===(o=null===(n=window.store)||void 0===n?void 0:n.getState())||void 0===o?void 0:o.entities)||void 0===r?void 0:r.channels)||void 0===a?void 0:a.currentChannelId)},t.prototype.render=function(){var e=this,t=this.state,n=t.newTodoText,o=t.newGroupName,r=t.selectedGroup,a=t.groups,i=t.channelMembers,l=t.showGroupForm,s=t.showTodoForm,d=t.draggedTodo,u=t.filterMyTasks;return this.props.channelDisplayName,c.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",padding:"0"}},c.default.createElement("div",{style:{flex:1,overflowY:"auto",padding:"20px"},onDragOver:function(e){return e.preventDefault()}},c.default.createElement("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#f5f5f5",borderRadius:"4px"}},c.default.createElement("input",{type:"checkbox",id:"filter-my-tasks",checked:u,onChange:function(t){return e.setState({filterMyTasks:t.target.checked})},style:{cursor:"pointer"}}),c.default.createElement("label",{htmlFor:"filter-my-tasks",style:{cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#333",userSelect:"none"}},"Show only my tasks")),c.default.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"8px"}},c.default.createElement("button",{onClick:function(){return e.setState({showTodoForm:!s,showGroupForm:!1})},style:{flex:1,padding:"8px 12px",fontSize:"14px",fontWeight:500,backgroundColor:s?"#1c58d9":"#f5f5f5",color:s?"white":"#333",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"}},s?"− Task":"+ Task"),c.default.createElement("button",{onClick:function(){return e.setState({showGroupForm:!l,showTodoForm:!1})},style:{flex:1,padding:"8px 12px",fontSize:"14px",fontWeight:500,backgroundColor:l?"#28a745":"#f5f5f5",color:l?"white":"#333",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"}},l?"− Group":"+ Group")),s&&c.default.createElement("div",{style:{marginBottom:"20px"}},c.default.createElement("input",{type:"text",value:n,onChange:function(t){return e.setState({newTodoText:t.target.value})},onKeyPress:function(t){return"Enter"===t.key&&e.addTodo()},placeholder:"Add new todo...",style:{width:"100%",padding:"10px",marginBottom:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},autoFocus:!0}),c.default.createElement("select",{value:r,onChange:function(t){return e.setState({selectedGroup:t.target.value})},style:{width:"100%",padding:"10px",marginBottom:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}},c.default.createElement("option",{value:""},"No Group"),a.map(function(e){return c.default.createElement("option",{key:e.id,value:e.id},e.name)})),c.default.createElement("button",{onClick:this.addTodo,style:{width:"100%",padding:"10px",backgroundColor:"#1c58d9",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",fontWeight:600,cursor:"pointer"}},"Add Todo")),l&&c.default.createElement("div",{style:{marginBottom:"20px"}},c.default.createElement("input",{type:"text",value:o,onChange:function(t){return e.setState({newGroupName:t.target.value})},onKeyPress:function(t){return"Enter"===t.key&&e.addGroup()},placeholder:"Group name...",style:{width:"100%",padding:"10px",marginBottom:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},autoFocus:!0}),c.default.createElement("button",{onClick:this.addGroup,style:{width:"100%",padding:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",fontWeight:600,cursor:"pointer"}},"Create Group")),c.default.createElement(f,{title:"Ungrouped",groupId:null,todos:this.groupedTodos(null),channelMembers:i,onToggle:this.toggleTodo,onDelete:this.deleteTodo,onToggleAssignee:this.toggleAssignee,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onDrop:this.handleDrop,isDragging:!!d}),a.map(function(t){return c.default.createElement(f,{key:t.id,title:t.name,groupId:t.id,todos:e.groupedTodos(t.id),channelMembers:i,onToggle:e.toggleTodo,onDelete:e.deleteTodo,onToggleAssignee:e.toggleAssignee,onDeleteGroup:function(){return e.deleteGroup(t.id)},onDragStart:e.handleDragStart,onDragEnd:e.handleDragEnd,onDrop:e.handleDrop,isDragging:!!d})}),0===this.state.todos.length&&c.default.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888"}},"No todos yet. Add one above to get started!")))},t}(c.default.Component),f=function(e){var t=e.title,n=e.groupId,o=e.todos,r=e.channelMembers,a=e.onToggle,i=e.onDelete,l=e.onToggleAssignee,s=e.onDeleteGroup,d=e.onDragStart,u=e.onDragEnd,p=e.onDrop,f=e.isDragging,h=c.default.useState(!1),m=h[0],x=h[1];c.default.useEffect(function(){f||x(!1)},[f]);var v=null===n,y=o.length>0;if(!(v||y||f||void 0!==s))return null;var b=f&&0===o.length;return y||b?c.default.createElement("div",{style:{marginBottom:"20px",minHeight:b?"80px":"auto",backgroundColor:m?"#f0f8ff":b?"#fafafa":"transparent",border:m?"2px dashed #1c58d9":b?"2px dashed #ddd":"none",borderRadius:"8px",padding:"12px",transition:"all 0.2s ease",position:"relative"},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move",x(!0)},onDragLeave:function(e){var t=e.currentTarget,n=e.relatedTarget;n&&t.contains(n)||x(!1)},onDrop:function(e){e.preventDefault(),e.stopPropagation(),x(!1),p(n)}},c.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:o.length>0?"12px":"0"}},c.default.createElement("h4",{style:{margin:0,fontSize:"13px",fontWeight:600,textTransform:"uppercase",color:"#666",letterSpacing:"0.5px"}},t),s&&c.default.createElement("button",{onClick:s,style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"}},"Delete")),b&&c.default.createElement("div",{style:{padding:"24px",textAlign:"center",color:m?"#1c58d9":"#999",fontSize:"13px",fontStyle:"italic",fontWeight:m?600:400}},m?"Drop to move to ".concat(t):"Drag items here to move to ".concat(t)),o.map(function(e){return c.default.createElement(g,{key:e.id,todo:e,channelMembers:r,onToggle:a,onDelete:i,onToggleAssignee:l,onDragStart:d,onDragEnd:u})})):c.default.createElement("div",{style:{marginBottom:"20px",minHeight:"60px",borderRadius:"8px",padding:"12px",border:"2px solid transparent",position:"relative",transition:"all 0.2s ease"}},c.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},c.default.createElement("h4",{style:{margin:0,fontSize:"13px",fontWeight:600,textTransform:"uppercase",color:"#666",letterSpacing:"0.5px"}},t),s&&c.default.createElement("button",{onClick:s,style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"}},"Delete")))},g=function(e){var t=e.todo,n=e.channelMembers,o=e.onToggle,r=e.onDelete,a=e.onToggleAssignee,i=e.onDragStart,l=e.onDragEnd,s=c.default.useState(!1),d=s[0],u=s[1],p=c.default.useState(!1),f=p[0],g=p[1],h=c.default.useRef(null);c.default.useEffect(function(){var e=function(e){h.current&&!h.current.contains(e.target)&&g(!1)};if(f)return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[f]);var m=t.assignee_ids||[],x=n.filter(function(e){return m.includes(e.id)});return c.default.createElement("div",{draggable:"true",onDragStart:function(e){u(!0),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.dropEffect="move",i(t)},onDrag:function(e){},onDragEnd:function(e){u(!1),l()},onMouseDown:function(e){var t=e.target;"INPUT"!==t.tagName&&"SELECT"!==t.tagName&&t.tagName},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},style:{padding:"12px",backgroundColor:t.completed?"#f8f9fa":"#fff",borderRadius:"4px",marginBottom:"8px",border:d?"2px dashed #1c58d9":"1px solid #e9ecef",opacity:d?.4:1,cursor:"grab",transition:"opacity 0.2s ease, border 0.2s ease",userSelect:"none"}},c.default.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},c.default.createElement("div",{style:{marginRight:"8px",color:"#999",fontSize:"16px",cursor:"grab",userSelect:"none",lineHeight:"1"},title:"Drag to move between groups"},"⋮⋮"),c.default.createElement("input",{type:"checkbox",checked:t.completed,onChange:function(){return o(t)},onClick:function(e){return e.stopPropagation()},style:{marginRight:"10px",marginTop:"3px",cursor:"pointer",flexShrink:0}}),c.default.createElement("div",{style:{flex:1,textDecoration:t.completed?"line-through":"none",color:t.completed?"#888":"#333",wordBreak:"break-word",fontSize:"14px",lineHeight:"1.5"}},t.text),c.default.createElement("div",{style:{position:"relative",marginLeft:"10px",marginRight:"4px"},ref:h},c.default.createElement("div",{onClick:function(){return g(!f)},style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"2px"},title:"Assign members"},0===x.length?c.default.createElement("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#ddd",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#666"}},c.default.createElement("i",{className:"icon icon-account-outline"})):c.default.createElement("div",{style:{display:"flex",alignItems:"center"}},x.slice(0,3).map(function(e,t){return c.default.createElement("img",{key:e.id,src:"/api/v4/users/".concat(e.id,"/image"),alt:e.username,style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid white",marginLeft:t>0?"-10px":"0",position:"relative",zIndex:3-t},title:e.username})}),x.length>3&&c.default.createElement("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#666",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"bold",border:"2px solid white",marginLeft:"-10px",position:"relative",zIndex:0}},"+",x.length-3))),f&&c.default.createElement("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"200px",maxHeight:"300px",overflowY:"auto"}},c.default.createElement("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",fontSize:"12px",fontWeight:600,color:"#666"}},"Assign to"),n.map(function(e){var n=m.includes(e.id);return c.default.createElement("div",{key:e.id,onClick:function(){return a(t,e.id)},style:{padding:"8px 12px",display:"flex",alignItems:"center",cursor:"pointer",backgroundColor:n?"#f0f8ff":"transparent",borderLeft:n?"3px solid #1c58d9":"3px solid transparent"},onMouseEnter:function(e){n||(e.currentTarget.style.backgroundColor="#f9f9f9")},onMouseLeave:function(e){n||(e.currentTarget.style.backgroundColor="transparent")}},c.default.createElement("img",{src:"/api/v4/users/".concat(e.id,"/image"),alt:e.username,style:{width:"24px",height:"24px",borderRadius:"50%",marginRight:"8px"}}),c.default.createElement("span",{style:{flex:1,fontSize:"14px"}},e.username),n&&c.default.createElement("i",{className:"icon icon-check",style:{color:"#1c58d9",fontSize:"16px"}}))}))),c.default.createElement("button",{onClick:function(e){e.stopPropagation(),r(t.id)},style:{padding:"4px 8px",fontSize:"16px",color:"#dc3545",background:"none",border:"none",cursor:"pointer",flexShrink:0,marginLeft:"8px"},title:"Delete todo"},"×")))};window.registerPlugin("com.mattermost.channel-todo",new u)}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(900),o=window;for(var r in n)o[r]=n[r];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();